<!DOCTYPE html>
<! -- google form questions: what made you stop the game? did you think you were done? what made you think you were done? (select all?)>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/@shopify/draggable@1.0.0-beta.8/lib/draggable.bundle.js"></script>
    <script src="matter-js-master/matter.js" type="text/javascript"></script>

    <link rel="stylesheet" type="text/css" href="base_style.css" />
    <link rel="stylesheet" type="text/css" href="gravity_animations.css" />
</head>

<body>
    <div style="pointer-events:none">
        <div class="bar_horizontal" style="top:150px; width: 600px; background-color:rgb(46,43,68)"></div>
        <div class="bar_horizontal" style="top:340px; width: 600px"></div>
        <div class="bar_horizontal" style="top:520px; width: 600px"></div>
        <div class="bar_vertical" style="top:120px; left:250px; height: 600px"></div>
        <div class="bar_vertical" style="top:340px; left:420px; height: 300px"></div>
    </div>
</body>

<script>

    var Example = Example || {};

    Example.compositeManipulation = function () {

        // module aliases
        var Engine = Matter.Engine,
            Render = Matter.Render,
            Runner = Matter.Runner,
            Events = Matter.Events,
            Composite = Matter.Composite,
            Composites = Matter.Composites,
            MouseConstraint = Matter.MouseConstraint,
            Mouse = Matter.Mouse,
            World = Matter.World,
            Bodies = Matter.Bodies;

        // create an engine
        var engine = Engine.create(),
            world = engine.world;

        // create a renderer
        var render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: 600px;
                height: 800px;
                showVelocity: true,
                // showAngleIndicator: true
                wireframes: false
            }
        });


        // run the renderer
        Render.run(render);

        // create runner
        var runner = Runner.create();
        Runner.run(runner, engine);

        //BODIES

        var stack = Composites.stack(200, 200, 20, 10, 0, 0, function (x, y) {
            return Bodies.rectangle(x, y, 20, 20);
        });
        var cloud = Composites.stack(200, 200, 4, 4, 0, 0, function (x, y) {
            return Bodies.rectangle(x, y, 40, 40);
        });
        var boxA = Bodies.rectangle(400, 200, 20, 20);
        var boxB = Bodies.rectangle(450, 50, 20, 20);
        var target = Bodies.circle(50, 500, 20);
        var ground = Bodies.rectangle(400, 610, 810, 60, { isStatic: true });

        // add all of the bodies to the world
        World.add(engine.world,
            [target, boxA, boxB, ground, stack, cloud,

                // mountain

                // walls
                Bodies.rectangle(500, 300, 20, 150, {
                    render: {
                        fillStyle: 'white',
                        lineWidth: 0
                    },
                    isStatic: true
                }),

                Bodies.rectangle(0, 300, 40, 600, {
                    render: {
                        fillStyle: 'black',
                        lineWidth: 0
                    },
                    isStatic: true
                }),
                Bodies.rectangle(400, 600, 800, 40, { isStatic: true })
            ]);


        world.gravity.y = 0;
        Events.on(engine, 'afterUpdate', function (event) {
            var time = engine.timing.timestamp;

            Composite.translate(cloud, {
                x: Math.sin(time * 0.001) * 2,
                y: 0
            });

            Composite.rotate(cloud, Math.sin(time * 0.001) * 0.01, {
                x: 300,
                y: 300
            });

            Composite.scale(cloud, scale, scale, {
                x: 300,
                y: 300
            });

        });

        // adding  mouse control
        var mouse = Mouse.create(render.canvas),
            mouseConstraint = MouseConstraint.create(engine, {
                mouse: mouse,
                constraint: {
                    stiffness: 0.2,
                    render: {
                        visible: false
                    }
                }
            });
        World.add(world, mouseConstraint);

        // keep the mouse in sync with rendering
        render.mouse = mouse;

        // fit the render viewport to the scene
        Render.lookAt(render, {
            min: { x: 0, y: 0 },
            max: { x: 800, y: 600 }
        });

        // context for MatterTools.Demo
        return {
            engine: engine,
            runner: runner,
            render: render,
            canvas: render.canvas,
            stop: function () {
                Matter.Render.stop(render);
                Matter.Runner.stop(runner);
            }
        };
    };


    if (typeof module !== 'undefined') {
        module.exports = Example[Object.keys(Example)[0]];
    }

</script>

</html>